import{a3 as j,a4 as G,a5 as W,a6 as d,a7 as U,a8 as Z,a9 as ee,aa as te,ab as X,ac as ae,P as oe,h as F,r as p,K as H,o as O,t as v,N as x,E as f,m as h,l as V,J as b,ad as se,w as P,F as q,D as R,p as _,O as z,ae as ne,af as re,ag as le,ah as ce,G as S,x as J,q as ie,ai as ue,I as T,v as A,n as de,aj as ve}from"./index-BMGRmbl0.js";import"//at.alicdn.com/t/c/font_4565805_mtkshfnyzag.js";const k=(o,e)=>new j(o).setAlpha(e).toRgbString(),$=(o,e)=>new j(o).lighten(e).toHexString(),fe=o=>{const e=G(o,{theme:"dark"});return{1:e[0],2:e[1],3:e[2],4:e[3],5:e[6],6:e[5],7:e[4],8:e[6],9:e[5],10:e[4]}},pe=(o,e)=>{const a=o||"#000",t=e||"#fff";return{colorBgBase:a,colorTextBase:t,colorText:k(t,.85),colorTextSecondary:k(t,.65),colorTextTertiary:k(t,.45),colorTextQuaternary:k(t,.25),colorFill:k(t,.18),colorFillSecondary:k(t,.12),colorFillTertiary:k(t,.08),colorFillQuaternary:k(t,.04),colorBgElevated:$(a,12),colorBgContainer:$(a,8),colorBgLayout:$(a,0),colorBgSpotlight:$(a,26),colorBorder:$(a,26),colorBorderSecondary:$(a,19)}},_e=(o,e)=>{const a=Object.keys(W).map(r=>{const l=G(o[r],{theme:"dark"});return new Array(10).fill(1).reduce((m,w,C)=>(m[`${r}-${C+1}`]=l[C],m),{})}).reduce((r,l)=>(r=d(d({},r),l),r),{}),t=e??U(o);return d(d(d({},t),a),Z(o,{generateColorPalettes:fe,generateNeutralColorPalettes:pe}))};function ge(o){const{sizeUnit:e,sizeStep:a}=o,t=a-2;return{sizeXXL:e*(t+10),sizeXL:e*(t+6),sizeLG:e*(t+2),sizeMD:e*(t+2),sizeMS:e*(t+1),size:e*t,sizeSM:e*t,sizeXS:e*(t-1),sizeXXS:e*(t-1)}}const he=(o,e)=>{const a=e??U(o),t=a.fontSizeSM,r=a.controlHeight-4;return d(d(d(d(d({},a),ge(e??o)),ee(t)),{controlHeight:r}),te(d(d({},a),{controlHeight:r})))};function me(){const[o,e,a]=ae();return{theme:o,token:e,hashId:a}}const ye={defaultConfig:X,defaultSeed:X.token,useToken:me,defaultAlgorithm:U,darkAlgorithm:_e,compactAlgorithm:he},ke=oe,Se=ke+"/api/v1";async function Ce(o,e,a,t=null,r=null){o=Se+o,t&&(o+="?"+new URLSearchParams(t).toString());try{return(await fetch(o,{method:e,headers:a,body:r?JSON.stringify(r):void 0})).json()}catch(l){console.error("Error:",l)}}async function Y(o,e,a=null,t=null){return Ce(o,e,{"Content-Type":"application/json"},a,t)}const Te={class:"header-content"},xe={class:"value-display"},we={key:1,class:"stored-value"},Me={class:"button-container"},N="SJ_API_KEY",De=F({__name:"HeaderComponent",setup(o){const e=p(""),a=p(""),t=p(!1),r=p(!1),l=H(()=>{const s=e.value;return s.length<=4?s:s.length<=8?s.slice(0,4)+"*".repeat(s.length-4):s.slice(0,4)+"****..."}),m=H(()=>e.value?"重置秘钥":"输入秘钥"),w=()=>{const s=localStorage.getItem(N);s?(e.value=s,y()):C()},C=()=>{t.value=!0},E=()=>{t.value=!1,a.value=""},i=()=>{a.value.trim()?(localStorage.setItem(N,a.value),e.value=a.value,a.value="",t.value=!1,S.success("秘钥保存成功"),y()):S.error("请输入秘钥")},c=()=>{localStorage.removeItem(N),e.value="",S.success("秘钥重置成功")},M=()=>{e.value?c():C()},D=s=>{const g=new Date,u=new Date(s);if(isNaN(u.getTime()))return"无效的过期时间";const n=u.getTime()-g.getTime();if(n<0)return"已经过期";const I=Math.floor(n/(1e3*60*60*24)),B=Math.floor(n%(1e3*60*60*24)/(1e3*60*60)),Q=Math.floor(n%(1e3*60*60)/(1e3*60));let L="";return I>0&&(L+=`${I}天`),(B>0||I>0)&&(L+=`${B}小时`),L+=`${Q}分钟`,L},y=async()=>{r.value=!0;try{const s=await Y("/api_key/get_information/"+e.value,"GET");if(s.is_key_valid){const u=String(s.expire_time);if(u=="Never expire")S.success("秘钥未激活， 等待激活后显示过期时间。");else{const n=D(u),I=new Date(u.replace(" ","T")),B=Math.ceil((I.getTime()-new Date().getTime())/(1e3*60*60*24));B<=7&&S.warning(`秘钥即将过期，剩余${B}天`),S.success(`剩余有效期：${n}`)}}}catch(s){console.error(s),S.error("获取信息失败")}finally{r.value=!1}};return O(()=>{w()}),(s,g)=>(v(),x(b(ce),{class:"header"},{default:f(()=>[h("div",Te,[h("div",xe,[e.value?(v(),V(q,{key:0},[r.value?(v(),x(b(se),{key:0})):(v(),V("span",we,"存储秘钥: "+P(l.value),1))],64)):R("",!0),h("div",Me,[_(b(ne),{class:"custom-button",size:"small",onClick:M},{default:f(()=>[z(P(m.value),1)]),_:1})])])]),_(b(le),{visible:t.value,"onUpdate:visible":g[1]||(g[1]=u=>t.value=u),title:"输入新秘钥",onOk:i,onCancel:E},{default:f(()=>[_(b(re),{value:a.value,"onUpdate:value":g[0]||(g[0]=u=>a.value=u),placeholder:"请输入秘钥"},null,8,["value"])]),_:1},8,["visible"])]),_:1}))}}),Ie=J(De,[["__scopeId","data-v-36dfa439"]]),$e={class:"content-wrapper"},be={class:"header"},ze={class:"theme-toggle-container"},Be=["innerHTML"],Ve={key:1,class:"account-list"},Le=F({__name:"Index",setup(o){const e=ie();ue();const a=p(!0),t=p(!1),r=p("选择状态为可用的账号使用，当下方使用账号次数达到上限时，这时候你需要点击换号，选择一个可用的账号使用。要想长期保留记录，请在此账号下续费，不然记录会丢失。如出现报错或无回复，请尝试刷新页面或退出账号重新登录，开始新对话即可使用。"),l=p([]),m=p(!1),w=()=>{t.value=!t.value},C=i=>{const c=i.idx,M=i.type;e.push({path:"/login",query:{client_idx:String(c),client_type:M}})},E=H(()=>i=>i.is_session_login?"#87d068":i.type==="normal"?"#2db7f5":i.usage<10&&i.status!=="cd"?"#ffff00":"#f50");return O(async()=>{const i=async()=>{try{const s=await Y("/clients_status","GET");return s&&s.length>0?(l.value=s,m.value=s.length>=10,a.value=!1,!0):!1}catch(s){return console.error("Error loading data:",s),!1}};let D=0;const y=async()=>{await i()||(D++,D<5?setTimeout(y,2e3):(a.value=!1,S.error("加载数据失败，请刷新页面重试")))};y()}),(i,c)=>{const M=T("a-switch"),D=T("a-spin"),y=T("a-tag"),s=T("a-statistic"),g=T("a-card"),u=T("a-divider");return v(),V("div",{class:A(["account-pool",{"dark-theme":t.value}])},[h("div",$e,[h("div",be,[h("div",ze,[_(M,{checked:t.value,"onUpdate:checked":c[0]||(c[0]=n=>t.value=n),onChange:w},{checkedChildren:f(()=>c[1]||(c[1]=[z("🌙")])),unCheckedChildren:f(()=>c[2]||(c[2]=[z("☀️")])),_:1},8,["checked"])]),h("div",{class:A(["notice",{dark:t.value}])},[h("div",{innerHTML:r.value},null,8,Be)],2)]),a.value?(v(),x(D,{key:0})):(v(),V("div",Ve,[(v(!0),V(q,null,de(l.value,n=>(v(),x(g,{key:n.id,hoverable:"",bordered:!1,class:A(["account-card",{dark:t.value,"card-plus":n.type==="plus","card-normal":n.type==="normal","card-cd":n.status==="cd"}]),onClick:I=>C(n)},{extra:f(()=>[n.is_session_login?(v(),x(y,{key:0,color:E.value(n)},{default:f(()=>c[3]||(c[3]=[z("官网1:1")])),_:2},1032,["color"])):R("",!0),_(y,{color:n.type==="normal"?"#2db7f5":"#f50"},{default:f(()=>[z(P(n.type),1)]),_:2},1032,["color"])]),default:f(()=>[_(s,{title:n.id,value:n.usage,"value-style":{color:"#3f8600"}},null,8,["title","value"]),_(s,{title:"状态",value:n.status==="cd"?"冷却":"可用","value-style":{color:n.status==="cd"?"#cf1322":"#3f8600"}},null,8,["value","value-style"])]),_:2},1032,["class","onClick"]))),128))])),m.value?(v(),x(u,{key:2,dashed:"",style:{"font-size":"14px","margin-top":"20px"}},{default:f(()=>c[4]||(c[4]=[z(" 上拉加载更多 ")])),_:1})):R("",!0)])],2)}}}),Ee=J(Le,[["__scopeId","data-v-bc3b1a4d"]]),Ae={style:{"margin-top":"40px"}},K="isDarkTheme",Pe=F({__name:"ClientsStatus",setup(o){const e=localStorage.getItem(K),a=p(e==="true"),t={algorithm:ye.darkAlgorithm},r=l=>{a.value=l,localStorage.setItem(K,String(l))};return(l,m)=>{const w=T("a-message-provider");return v(),x(b(ve),{theme:a.value?t:void 0},{default:f(()=>[_(w,null,{default:f(()=>[_(Ie)]),_:1}),h("div",Ae,[_(Ee,{isDarkTheme:a.value,onChangeIsDarkTheme:r},null,8,["isDarkTheme"])])]),_:1},8,["theme"])}}});export{Pe as default};
