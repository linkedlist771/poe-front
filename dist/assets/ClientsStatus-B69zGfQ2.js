import{a7 as J,a8 as Y,a9 as te,aa as d,ab as F,ac as ae,ad as se,ae as oe,af as O,ag as ne,T as q,h as K,r as f,P as H,o as G,w as v,R as z,K as p,n as m,m as V,z as M,ah as re,y as A,F as Q,J as W,q as _,S as b,ai as le,aj as ce,ak as ie,al as ue,L as h,C as Z,t as de,v as ve,D as pe,O as T,x as U,p as ge,am as he}from"./index-BI-xII2M.js";import"//at.alicdn.com/t/c/font_4565805_mtkshfnyzag.js";const S=(o,e)=>new J(o).setAlpha(e).toRgbString(),I=(o,e)=>new J(o).lighten(e).toHexString(),fe=o=>{const e=Y(o,{theme:"dark"});return{1:e[0],2:e[1],3:e[2],4:e[3],5:e[6],6:e[5],7:e[4],8:e[6],9:e[5],10:e[4]}},_e=(o,e)=>{const a=o||"#000",t=e||"#fff";return{colorBgBase:a,colorTextBase:t,colorText:S(t,.85),colorTextSecondary:S(t,.65),colorTextTertiary:S(t,.45),colorTextQuaternary:S(t,.25),colorFill:S(t,.18),colorFillSecondary:S(t,.12),colorFillTertiary:S(t,.08),colorFillQuaternary:S(t,.04),colorBgElevated:I(a,12),colorBgContainer:I(a,8),colorBgLayout:I(a,0),colorBgSpotlight:I(a,26),colorBorder:I(a,26),colorBorderSecondary:I(a,19)}},me=(o,e)=>{const a=Object.keys(te).map(n=>{const c=Y(o[n],{theme:"dark"});return new Array(10).fill(1).reduce((y,x,r)=>(y[`${n}-${r+1}`]=c[r],y),{})}).reduce((n,c)=>(n=d(d({},n),c),n),{}),t=e??F(o);return d(d(d({},t),a),ae(o,{generateColorPalettes:fe,generateNeutralColorPalettes:_e}))};function ye(o){const{sizeUnit:e,sizeStep:a}=o,t=a-2;return{sizeXXL:e*(t+10),sizeXL:e*(t+6),sizeLG:e*(t+2),sizeMD:e*(t+2),sizeMS:e*(t+1),size:e*t,sizeSM:e*t,sizeXS:e*(t-1),sizeXXS:e*(t-1)}}const ke=(o,e)=>{const a=e??F(o),t=a.fontSizeSM,n=a.controlHeight-4;return d(d(d(d(d({},a),ye(e??o)),se(t)),{controlHeight:n}),oe(d(d({},a),{controlHeight:n})))};function Se(){const[o,e,a]=ne();return{theme:o,token:e,hashId:a}}const Te={defaultConfig:O,defaultSeed:O.token,useToken:Se,defaultAlgorithm:F,darkAlgorithm:me,compactAlgorithm:ke},xe=q,Ce=xe+"/api/v1";async function we(o,e,a,t=null,n=null){o=Ce+o,t&&(o+="?"+new URLSearchParams(t).toString());try{return(await fetch(o,{method:e,headers:a,body:n?JSON.stringify(n):void 0})).json()}catch(c){console.error("Error:",c)}}async function ee(o,e,a=null,t=null){return we(o,e,{"Content-Type":"application/json"},a,t)}const $e={class:"header-content"},De={class:"value-display"},Ie={key:1,class:"stored-value"},Me={class:"button-container"},P="SJ_API_KEY",be=K({__name:"HeaderComponent",setup(o){const e=f(""),a=f(""),t=f(!1),n=f(!1),c=H(()=>{const s=e.value;return s.length<=4?s:s.length<=8?s.slice(0,4)+"*".repeat(s.length-4):s.slice(0,4)+"****..."}),y=H(()=>e.value?"é‡ç½®ç§˜é’¥":"è¾“å…¥ç§˜é’¥"),x=()=>{const s=localStorage.getItem(P);s?(e.value=s,L()):r()},r=()=>{t.value=!0},i=()=>{t.value=!1,a.value=""},C=async()=>{const s=localStorage.getItem("SJ_API_KEY"),g=`${q}/api/v1/device_verification/device/${s}/update`;try{const l=await fetch(g,{method:"POST",headers:{"Content-Type":"application/json"}});if(!l.ok)throw new Error(`Network response was not ok: ${l.statusText}`);const k=await l.json();console.log(k)}catch(l){console.error("Device status check failed:",l)}},w=()=>{if(a.value.trim()){localStorage.setItem(P,a.value),e.value=a.value,a.value="",t.value=!1,h.success("ç§˜é’¥ä¿å­˜æˆåŠŸ");try{L()}catch{}try{C()}catch{}}else h.error("è¯·è¾“å…¥ç§˜é’¥")},$=()=>{localStorage.removeItem(P),e.value="",h.success("ç§˜é’¥é‡ç½®æˆåŠŸ")},u=()=>{e.value?$():r()},N=s=>{const g=new Date,l=new Date(s);if(isNaN(l.getTime()))return"æ— æ•ˆçš„è¿‡æœŸæ—¶é—´";const k=l.getTime()-g.getTime();if(k<0)return"å·²ç»è¿‡æœŸ";const B=Math.floor(k/(1e3*60*60*24)),E=Math.floor(k%(1e3*60*60*24)/(1e3*60*60)),R=Math.floor(k%(1e3*60*60)/(1e3*60));let D="";return B>0&&(D+=`${B}å¤©`),(E>0||B>0)&&(D+=`${E}å°æ—¶`),D+=`${R}åˆ†é’Ÿ`,D},L=async()=>{n.value=!0;try{const s=await ee("/api_key/get_information/"+e.value,"GET");if(s.is_key_valid){const l=String(s.expire_time),k=s.usage_limit,B=s.current_usage,E=k-B;if(l=="Never expire")h.success("ç§˜é’¥æœªæ¿€æ´»ï¼Œ ç­‰å¾…æ¿€æ´»åæ˜¾ç¤ºè¿‡æœŸæ—¶é—´ã€‚");else{const R=N(l),D=new Date(l.replace(" ","T")),j=Math.ceil((D.getTime()-new Date().getTime())/(1e3*60*60*24));j<=7&&h.warning(`ç§˜é’¥å³å°†è¿‡æœŸï¼Œå‰©ä½™${j}å¤©`),h.success(`å‰©ä½™æœ‰æ•ˆæœŸï¼š${R}`)}h.info(`å‰©ä½™ä½¿ç”¨ç§¯åˆ†ï¼š${E}`)}else h.error("ç§˜é’¥æ— æ•ˆï¼Œ è¯·è¾“å…¥æœ‰æ•ˆçš„ç§˜é’¥"),localStorage.removeItem(P),e.value="",a.value=""}catch(s){console.error(s),h.error("è·å–ä¿¡æ¯å¤±è´¥")}finally{n.value=!1}};return G(()=>{x()}),(s,g)=>(v(),z(M(ue),{class:"header"},{default:p(()=>[m("div",$e,[m("div",De,[e.value?(v(),V(Q,{key:0},[n.value?(v(),z(M(re),{key:0})):(v(),V("span",Ie,"å­˜å‚¨ç§˜é’¥: "+A(c.value),1))],64)):W("",!0),m("div",Me,[_(M(le),{class:"custom-button",size:"small",onClick:u},{default:p(()=>[b(A(y.value),1)]),_:1})])])]),_(M(ie),{visible:t.value,"onUpdate:visible":g[1]||(g[1]=l=>t.value=l),title:"è¾“å…¥æ–°ç§˜é’¥",onOk:w,onCancel:i},{default:p(()=>[_(M(ce),{value:a.value,"onUpdate:value":g[0]||(g[0]=l=>a.value=l),placeholder:"è¯·è¾“å…¥ç§˜é’¥"},null,8,["value"])]),_:1},8,["visible"])]),_:1}))}}),ze=Z(be,[["__scopeId","data-v-113da9b4"]]),Be={class:"content-wrapper"},Ve={class:"header"},Le={class:"theme-toggle-container"},Ee=["innerHTML"],Pe={key:1,class:"account-list"},Ae=K({__name:"Index",setup(o){const e=de();ve();const a=f(!0),t=f(!1),n=f(`
  <p>
    1ã€POEè´¦å·æ˜¯ç§¯åˆ†åˆ¶ï¼Œä¸å­˜åœ¨é€Ÿç‡é™åˆ¶ï¼Œåœ¨è¯¥è´¦å·ç§¯åˆ†ä½¿ç”¨å®Œæ¯•ä¹‹å‰å‡å¯ä½¿ç”¨ï¼Œ<span class="highlight">è¯·æ³¨æ„æ‚¨çš„ç§¯åˆ†æ¶ˆè€—é€Ÿåº¦</span>ï¼Œå³ä½¿åœ¨æœ‰æ•ˆæœŸå†…ï¼Œ<strong>ç§¯åˆ†æ¶ˆè€—å®Œåä¹Ÿå°†æ— æ³•ä½¿ç”¨ï¼Œéœ€è¦é‡æ–°ç»­è´¹å¢åŠ ç§¯åˆ†</strong>ã€‚<br><br>
    2ã€<span class="highlight">è¯·æ³¨æ„æ‚¨çš„ç§˜é’¥æœ‰æ•ˆæœŸ</span>ï¼Œ<strong>ç§˜é’¥è¿‡æœŸåå°†æ— æ³•ä½¿ç”¨</strong>ï¼Œç»­è´¹ä¼šé‡ç½®ç§¯åˆ†ï¼Œä¸ä¼šç´¯ç§¯ã€‚
  </p>
`),c=f([]),y=f(!1);pe(t,r=>{console.log("Theme changed:",r?"Dark":"Light")});const x=r=>{const i=r.idx,C=r.type;e.push({path:"/login",query:{client_idx:String(i),client_type:C}})};return H(()=>r=>r.is_session_login?"#87d068":r.type==="normal"?"#2db7f5":r.usage<10&&r.status!=="cd"?"#ffff00":"#f50"),G(async()=>{const r=async()=>{try{const u=await ee("/clients_status","GET");return u&&u.length>0?(c.value=u,y.value=u.length>=10,a.value=!1,!0):!1}catch(u){return console.error("Error loading data:",u),!1}};let w=0;const $=async()=>{await r()||(w++,w<10?setTimeout($,2e3):(a.value=!1,h.error("åŠ è½½æ•°æ®å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•")))};$()}),(r,i)=>{const C=T("a-switch"),w=T("a-spin"),$=T("a-tag"),u=T("a-statistic"),N=T("a-card"),L=T("a-divider");return v(),V("div",{class:U(["account-pool",{"dark-theme":t.value}])},[m("div",Be,[m("div",Ve,[m("div",Le,[_(C,{checked:t.value,"onUpdate:checked":i[0]||(i[0]=s=>t.value=s)},{checkedChildren:p(()=>i[1]||(i[1]=[b("ğŸŒ™")])),unCheckedChildren:p(()=>i[2]||(i[2]=[b("â˜€ï¸")])),_:1},8,["checked"])]),m("div",{class:U(["notice",{dark:t.value}])},[m("div",{innerHTML:n.value},null,8,Ee)],2)]),a.value?(v(),z(w,{key:0})):(v(),V("div",Pe,[(v(!0),V(Q,null,ge(c.value,s=>(v(),z(N,{key:s.id,hoverable:"",bordered:!1,class:U(["account-card",{dark:t.value,"card-plus":s.type==="plus","card-normal":s.type==="normal","card-cd":s.status==="cd"}]),onClick:g=>x(s)},{extra:p(()=>[_($,{color:s.type==="normal"?"#2db7f5":"#f50"},{default:p(()=>[b(A(s.type),1)]),_:2},1032,["color"])]),default:p(()=>[b(" "+A(s.id)+" ",1),_(u,{title:"è¯¥è´¦å·å‰©ä½™å¯ç”¨ç§¯åˆ†",value:s.usage,"value-style":{color:"#3f8600"}},null,8,["value"]),_(u,{title:"çŠ¶æ€",value:s.status==="cd"?"å†·å´":"å¯ç”¨","value-style":{color:s.status==="cd"?"#cf1322":"#3f8600"}},null,8,["value","value-style"])]),_:2},1032,["class","onClick"]))),128))])),y.value?(v(),z(L,{key:2,dashed:"",style:{"font-size":"14px","margin-top":"20px"}},{default:p(()=>i[3]||(i[3]=[b(" ä¸Šæ‹‰åŠ è½½æ›´å¤š ")])),_:1})):W("",!0)])],2)}}}),Ne=Z(Ae,[["__scopeId","data-v-fa79074c"]]),Re={style:{"margin-top":"40px"}},X="isDarkTheme",Fe=K({__name:"ClientsStatus",setup(o){const e=localStorage.getItem(X),a=f(e==="true"),t={algorithm:Te.darkAlgorithm},n=c=>{a.value=c,localStorage.setItem(X,String(c))};return(c,y)=>{const x=T("a-message-provider");return v(),z(M(he),{theme:a.value?t:void 0},{default:p(()=>[_(x,null,{default:p(()=>[_(ze)]),_:1}),m("div",Re,[_(Ne,{isDarkTheme:a.value,onChangeIsDarkTheme:n},null,8,["isDarkTheme"])])]),_:1},8,["theme"])}}});export{Fe as default};
